language: python
python:
  - "2.7"
  - "3.6"  
sudo: false

cache:
  directories:
    - "$HOME/.m2/repository"
    - "$HOME/.cache/pip"

branches:
  only:
    - master
    - development

install: 
  - sudo apt-get -qq update
  - sudo apt-get install maven
  - pip install -U pip wheel
  - pip install -r pip_requirements.txt

env:
  - TYPE=cli           USE_OPENBIS_RAW_API=no   USE_OPENBIS_CLIENT=no   USE_QBIC_DATABASES=no
  - TYPE=generic-lib   USE_OPENBIS_RAW_API=no   USE_OPENBIS_CLIENT=no   USE_QBIC_DATABASES=no
  - TYPE=portal-lib    USE_OPENBIS_RAW_API=no   USE_OPENBIS_CLIENT=no   USE_QBIC_DATABASES=no
  - TYPE=portlet       USE_OPENBIS_RAW_API=no   USE_OPENBIS_CLIENT=no   USE_QBIC_DATABASES=no
  - TYPE=portlet       USE_OPENBIS_RAW_API=no   USE_OPENBIS_CLIENT=no   USE_QBIC_DATABASES=yes
  - TYPE=portlet       USE_OPENBIS_RAW_API=no   USE_OPENBIS_CLIENT=yes  USE_QBIC_DATABASES=no
  - TYPE=portlet       USE_OPENBIS_RAW_API=no   USE_OPENBIS_CLIENT=yes  USE_QBIC_DATABASES=yes
  - TYPE=portlet       USE_OPENBIS_RAW_API=yes  USE_OPENBIS_CLIENT=no   USE_QBIC_DATABASES=no
  - TYPE=portlet       USE_OPENBIS_RAW_API=yes  USE_OPENBIS_CLIENT=no   USE_QBIC_DATABASES=yes
  - TYPE=portlet       USE_OPENBIS_RAW_API=yes  USE_OPENBIS_CLIENT=yes  USE_QBIC_DATABASES=no
  - TYPE=portlet       USE_OPENBIS_RAW_API=yes  USE_OPENBIS_CLIENT=yes  USE_QBIC_DATABASES=yes

script: "./.travis.sh"

after_success:
  - codecov

notifications:
  email:
    on_success: never
    on_failure: never